   0 squid -z
   1 /etc/init.d/squid stop
   2 squid -z
   3 /etc/init.d/squid reload
   4 /etc/init.d/squid start
   5 /etc/init.d/squid stop
   6 squid -f /tmp/squid/squid.conf -d2
   7 vim /etc/squid/squid.conf 
   8 vi /etc/squid/squid.conf 
   9 /etc/init.d/squid stop
  10 /etc/init.d/squid start
  11 vi /etc/squid/squid.conf 
  12 clear
  13 /etc/init.d/squid stop
  14 vi /etc/squid/squid.conf 
  15 clear
  16 squid -k reconfigure
  17 squid -z
  18 chown 0777 /tmp/squid/cache/
  19 squid -z
  20 chown 0777 /tmp/squid/
  21 chown 0777 /tmp/squid/ -R
  22 squid -z
  23 rm -rf /tmp/squid/cache/*
  24 /etc/init.d/squid stop
  25 clear
  26 rm -rf /tmp/squid/cache/*
  27 chmod 0777 -R /tmp/squid/cache/
  28 ls /tmp/squid/
  29 ls /tmp/squid/cache/
  30 chmod 0777 -R /tmp/squid/cache
  31 /etc/init.d/squid enable
  32 /etc/init.d/squid -z
  33 squid -k reconfigure
  34 squid -z
  35 squid -k reconfigure
  36 /etc/init.d/squid start
  37 squid -k reconfigure
  38 clear
  39 ls
  40 vim squid/squid.conf 
  41 clear
  42 cat <<EOF >/tmp/squid/squid.conf 
  43 acl localnet src 10.0.0.0/8
  44 acl localnet src 172.16.0.0/12
  45 acl localnet src 192.168.0.0/16
  46 acl localnet src fc00::/7
  47 acl localnet src fe80::/10
  48 acl ssl_ports port 443
  49 acl safe_ports port 80
  50 acl safe_ports port 21
  51 acl safe_ports port 443
  52 acl safe_ports port 70
  53 acl safe_ports port 210
  54 acl safe_ports port 1025-65535
  55 acl safe_ports port 280
  56 acl safe_ports port 488
  57 acl safe_ports port 591
  58 acl safe_ports port 777
  59 acl connect method connect
  60 http_access deny !safe_ports
  61 http_access deny connect !ssl_ports
  62 http_access allow localhost manager
  63 http_access deny manager
  64 http_access deny to_localhost
  65 http_access allow localnet
  66 http_access allow localhost
  67 http_access deny all
  68 refresh_pattern ^ftp: 1440 20% 10080
  69 refresh_pattern ^gopher: 1440 0% 1440
  70 refresh_pattern -i (/cgi-bin/|\?) 0 0% 0
  71 refresh_pattern . 0 20% 4320
  72 access_log none
  73 cache_log /dev/null
  74 cache_store_log stdio:/dev/null
  75 logfile_rotate 0
  76 logfile_daemon /dev/null
  77 http_port 3128 intercept
  78 # cache_dir aufs Directory-Name Mbytes L1 L2 [options]
  79 cache_dir aufs /tmp/squid/cache 4086 16 512
  80 # If you have 64 MB device RAM you can use 16 MB cache_mem, default is 8 MB
  81 cache_mem 256 MB             
  82 maximum_object_size_in_memory 64 MB
  83 maximum_object_size 64 MB
  84 EOF
  85 clear
  86 /etc/init.d/squid stop
  87 squid -k reconfigure
  88 rm /tmp/run/squid.pid 
  89 squid -k reconfigure
  90 /etc/init.d/squid start
  91 squid -k reconfigure
  92 squid -z
  93 /etc/init.d/squid stop
  94 squid -z
  95 chmod 0777 /tmp/squid/ -R
  96 /etc/init.d/squid start
  97 cp squid/squid.conf squid/squid.conf.lastknowngood
  98 echo <<EOF >/tmp/squid/squid.conf
  99 acl localnet src 10.0.0.0/8     # RFC1918 possible internal network
 100 acl localnet src 172.16.0.0/12  # RFC1918 possible internal network
 101 acl localnet src 192.168.0.0/16 # RFC1918 possible internal network
 102 acl localnet src fc00::/7       # RFC 4193 local private network range
 103 acl localnet src fe80::/10      # RFC 4291 link-local (directly plugged) machines
 104 acl SSL_ports port 443
 105 acl Safe_ports port 80          # http
 106 acl Safe_ports port 21          # ftp
 107 acl Safe_ports port 443         # https
 108 acl Safe_ports port 70          # gopher
 109 acl Safe_ports port 210         # wais
 110 acl Safe_ports port 1025-65535  # unregistered ports
 111 acl Safe_ports port 280         # http-mgmt
 112 acl Safe_ports port 488         # gss-http
 113 acl Safe_ports port 591         # filemaker
 114 acl Safe_ports port 777         # multiling http
 115 acl CONNECT method CONNECT
 116 # HTTP Stuff
 117 http_access deny !Safe_ports
 118 http_access deny CONNECT !SSL_ports
 119 http_access allow localhost manager
 120 http_access deny manager
 121 http_access allow localnet
 122 http_access allow localhost
 123 http_access deny all
 124 http_port 3128 intercept
 125 # SSL Stuff
 126 acl no_bump dstdomain .pressganey.com
 127 ssl_bump        none            localhost
 128 ssl_bump        none            no_bump
 129 ssl_bump        server-first    all
 130 sslcrtd_program /usr/lib/squid3/ssl_crtd -s /mnt/sdcard/ssl_db -M 4MB
 131 https_port 3129 intercept ssl-bump cert=/etc/easy-rsa/keys/ca.crt key=/etc/easy-rsa/keys/ca.key generate-host-certificates=on
 132 #The following port is required for overflow/outbound negotiation of server-first connections
 133 http_port 3127
 134 #Logging
 135 access_log      /mnt/sdcard/cache/access.log
 136 cache_log       /mnt/sdcard/cache/cache.log
 137 cache_store_log /mnt/sdcard/cache/store.log
 138 pid_filename    /mnt/sdcard/cache/squid.pid
 139 netdb_filename  /mnt/sdcard/cache/netdb.state
 140 coredump_dir    /mnt/sdcard/cache
 141 #Caching
 142 cache_mem 2 MB
 143 maximum_object_size_in_memory 128 KB
 144 cache_dir ufs /mnt/sdcard/cache 5000 16 256
 145 maximum_object_size 200 MB
 146 cache allow all
 147 EOF
 148 vim /tmp/squid/squid.conf
 149 vi /tmp/squid/squid.conf
 150 cat <<EOF >/tmp/squid/squid.conf
 151 acl localnet src 10.0.0.0/8     # RFC1918 possible internal network
 152 acl localnet src 172.16.0.0/12  # RFC1918 possible internal network
 153 acl localnet src 192.168.0.0/16 # RFC1918 possible internal network
 154 acl localnet src fc00::/7       # RFC 4193 local private network range
 155 acl localnet src fe80::/10      # RFC 4291 link-local (directly plugged) machines
 156 acl SSL_ports port 443
 157 acl Safe_ports port 80          # http
 158 acl Safe_ports port 21          # ftp
 159 acl Safe_ports port 443         # https
 160 acl Safe_ports port 70          # gopher
 161 acl Safe_ports port 210         # wais
 162 acl Safe_ports port 1025-65535  # unregistered ports
 163 acl Safe_ports port 280         # http-mgmt
 164 acl Safe_ports port 488         # gss-http
 165 acl Safe_ports port 591         # filemaker
 166 acl Safe_ports port 777         # multiling http
 167 acl CONNECT method CONNECT
 168 # HTTP Stuff
 169 http_access deny !Safe_ports
 170 http_access deny CONNECT !SSL_ports
 171 http_access allow localhost manager
 172 http_access deny manager
 173 http_access allow localnet
 174 http_access allow localhost
 175 http_access deny all
 176 http_port 3128 intercept
 177 # SSL Stuff
 178 acl no_bump dstdomain .pressganey.com
 179 ssl_bump        none            localhost
 180 ssl_bump        none            no_bump
 181 ssl_bump        server-first    all
 182 sslcrtd_program /usr/lib/squid3/ssl_crtd -s /mnt/sdcard/ssl_db -M 4MB
 183 https_port 3129 intercept ssl-bump cert=/etc/easy-rsa/keys/ca.crt key=/etc/easy-rsa/keys/ca.key generate-host-certificates=on
 184 #The following port is required for overflow/outbound negotiation of server-first connections
 185 http_port 3127
 186 #Logging
 187 access_log      /mnt/sdcard/cache/access.log
 188 cache_log       /mnt/sdcard/cache/cache.log
 189 cache_store_log /mnt/sdcard/cache/store.log
 190 pid_filename    /mnt/sdcard/cache/squid.pid
 191 netdb_filename  /mnt/sdcard/cache/netdb.state
 192 coredump_dir    /mnt/sdcard/cache
 193 #Caching
 194 cache_mem 2 MB
 195 maximum_object_size_in_memory 128 KB
 196 cache_dir ufs /mnt/sdcard/cache 5000 16 256
 197 maximum_object_size 200 MB
 198 cache allow all
 199 EOF
 200 vi /tmp/squid/squid.conf
 201 clear
 202 squid -z
 203 squid -k reconfigure
 204 squid -z
 205 clear
 206 squid
 207 du -hs /tmp/squid/cache/
 208 clear
 209 history ~/squid-build.log
 210 ls
 211 history > ~/squid-build.log
